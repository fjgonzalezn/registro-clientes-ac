<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FG Hvac Solutions - Panel Moderno</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            overflow-x: hidden;
        }
        
        /* Fondo espectacular con gradientes animados */
        .login-gradient {
            background: linear-gradient(-45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3, #54a0ff);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            position: relative;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Part√≠culas flotantes mejoradas */
        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        .particle:nth-child(1) { width: 4px; height: 4px; left: 10%; animation-delay: 0s; }
        .particle:nth-child(2) { width: 6px; height: 6px; left: 20%; animation-delay: 1s; }
        .particle:nth-child(3) { width: 3px; height: 3px; left: 30%; animation-delay: 2s; }
        .particle:nth-child(4) { width: 5px; height: 5px; left: 40%; animation-delay: 3s; }
        .particle:nth-child(5) { width: 4px; height: 4px; left: 50%; animation-delay: 4s; }
        .particle:nth-child(6) { width: 7px; height: 7px; left: 60%; animation-delay: 5s; }
        .particle:nth-child(7) { width: 3px; height: 3px; left: 70%; animation-delay: 0.5s; }
        .particle:nth-child(8) { width: 5px; height: 5px; left: 80%; animation-delay: 1.5s; }
        .particle:nth-child(9) { width: 4px; height: 4px; left: 90%; animation-delay: 2.5s; }
        .particle:nth-child(10) { width: 6px; height: 6px; left: 15%; animation-delay: 3.5s; }
        
        @keyframes float {
            0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        /* Tarjeta con efecto glassmorphism */
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 25px 45px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            position: relative;
            overflow: hidden;
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* Logo con animaci√≥n 3D */
        .logo-3d {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            position: relative;
            transform-style: preserve-3d;
            animation: logoFloat 4s ease-in-out infinite;
            box-shadow: 
                0 20px 40px rgba(102, 126, 234, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px) rotateX(0deg) rotateY(0deg); }
            25% { transform: translateY(-10px) rotateX(5deg) rotateY(5deg); }
            50% { transform: translateY(-5px) rotateX(-5deg) rotateY(-5deg); }
            75% { transform: translateY(-15px) rotateX(5deg) rotateY(-5deg); }
        }
        
        /* Inputs con efectos m√°gicos */
        .magic-input {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            color: white;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .magic-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .magic-input:focus {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px) scale(1.02);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 0 0 4px rgba(255, 255, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        /* Labels flotantes */
        .floating-label {
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Bot√≥n espectacular */
        .magic-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            border: none;
            border-radius: 16px;
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 15px 35px rgba(102, 126, 234, 0.3),
                0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .magic-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
        
        .magic-button:hover {
            transform: translateY(-3px) scale(1.05);
            background-position: 100% 0;
            box-shadow: 
                0 25px 50px rgba(102, 126, 234, 0.4),
                0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .magic-button:hover::before {
            left: 100%;
        }
        
        .magic-button:active {
            transform: translateY(-1px) scale(1.02);
        }
        
        /* Animaciones de entrada */
        .slide-in-up {
            animation: slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(60px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .slide-in-left {
            animation: slideInLeft 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-60px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .slide-in-right {
            animation: slideInRight 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(60px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Efectos de hover mejorados */
        .hover-glow {
            transition: all 0.3s ease;
        }
        
        .hover-glow:hover {
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        /* Checkbox personalizado */
        .custom-checkbox {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .custom-checkbox:checked {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .custom-checkbox:checked::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        /* Efectos de texto */
        .text-glow {
            text-shadow: 
                0 0 10px rgba(255, 255, 255, 0.5),
                0 0 20px rgba(255, 255, 255, 0.3),
                0 0 30px rgba(255, 255, 255, 0.1);
        }
        
        /* Animaci√≥n de shake mejorada */
        .shake-enhanced {
            animation: shakeEnhanced 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes shakeEnhanced {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            10% { transform: translateX(-10px) rotate(-1deg); }
            20% { transform: translateX(10px) rotate(1deg); }
            30% { transform: translateX(-10px) rotate(-1deg); }
            40% { transform: translateX(10px) rotate(1deg); }
            50% { transform: translateX(-5px) rotate(-0.5deg); }
            60% { transform: translateX(5px) rotate(0.5deg); }
            70% { transform: translateX(-5px) rotate(-0.5deg); }
            80% { transform: translateX(5px) rotate(0.5deg); }
            90% { transform: translateX(-2px) rotate(-0.2deg); }
        }
        
        /* Loading spinner mejorado */
        .magic-spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #ffffff;
            border-radius: 50%;
            animation: magicSpin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }
        
        @keyframes magicSpin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        /* Responsive mejorado */
        @media (max-width: 640px) {
            .glass-card {
                margin: 1rem;
                border-radius: 20px;
            }
            
            .magic-input {
                font-size: 16px; /* Previene zoom en iOS */
            }
        }
        
        /* Estilos del panel moderno */
        .nav-item {
            color: #6b7280;
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            color: #374151;
            background-color: #f3f4f6;
        }
        
        .nav-item.active {
            color: #3b82f6;
            background-color: #eff6ff;
        }
        
        .section-content {
            display: none;
        }
        
        .section-content.active {
            display: block;
        }
        
        .stat-card {
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform-origin: 50% 50%;
        }
        
        /* Animaciones suaves */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-up {
            animation: slideUp 0.6s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Sidebar responsive */
        @media (max-width: 1024px) {
            #sidebar {
                transform: translateX(-100%);
            }
            
            #sidebar.open {
                transform: translateX(0);
            }
        }
        
        /* Overlay para m√≥vil */
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 30;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* Efectos de botones modernos */
        .modern-btn {
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .modern-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .modern-btn:hover::before {
            left: 100%;
        }
        
        .modern-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        /* Cards con efectos modernos */
        .modern-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .modern-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        /* Gr√°ficos modernos */
        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        /* Tabla moderna */
        .modern-table {
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .modern-table th {
            background: #f8fafc;
            font-weight: 600;
            text-align: left;
            padding: 1rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .modern-table td {
            padding: 1rem;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .modern-table tr:hover {
            background: #f8fafc;
        }
        
        /* Notificaciones modernas */
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            max-width: 400px;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            animation: slideInRight 0.3s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Estados de carga modernos */
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Efectos de focus modernos */
        .modern-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        /* Scrollbar personalizada */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body class="login-gradient min-h-screen flex items-center justify-center">
    <!-- Part√≠culas flotantes espectaculares -->
    <div class="floating-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- Contenedor principal de login -->
    <div class="w-full max-w-md mx-4">
        <!-- Tarjeta de login espectacular -->
        <div id="login-card" class="glass-card p-8 slide-in-up">
            <!-- Logo y t√≠tulo con efectos 3D -->
            <div class="text-center mb-8">
                <div class="logo-3d p-4 w-24 h-24 mx-auto mb-6 flex items-center justify-center relative">
                    <svg class="w-12 h-12 text-white relative z-10" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                        <path d="M10 17l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" fill="rgba(255,255,255,0.9)"/>
                    </svg>
                </div>
                <h1 class="text-4xl font-bold text-white mb-3 text-glow slide-in-left">FG Hvac Solutions</h1>
                <div class="text-3xl mb-4 slide-in-right">üî• ‚ùÑÔ∏è</div>
                <p class="text-lg text-white opacity-90 slide-in-up">Acceso Seguro al Sistema</p>
            </div>

            <!-- Formulario de login -->
            <form id="login-form" onsubmit="iniciarSesion(event)">
                <div class="space-y-8">
                    <!-- Campo de usuario m√°gico -->
                    <div class="slide-in-left" style="animation-delay: 0.2s;">
                        <label for="usuario" class="floating-label mb-3">
                            <span class="text-2xl">üë§</span>
                            <span>Usuario</span>
                        </label>
                        <div class="relative">
                            <input 
                                type="text" 
                                id="usuario" 
                                name="usuario"
                                class="magic-input w-full px-6 py-4 text-lg"
                                placeholder="Ingresa tu usuario"
                                required
                                autocomplete="username"
                            >
                            <div class="absolute inset-y-0 right-0 pr-4 flex items-center input-icon">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- Campo de contrase√±a m√°gico -->
                    <div class="slide-in-right" style="animation-delay: 0.4s;">
                        <label for="password" class="floating-label mb-3">
                            <span class="text-2xl">üîí</span>
                            <span>Contrase√±a</span>
                        </label>
                        <div class="relative">
                            <input 
                                type="password" 
                                id="password" 
                                name="password"
                                class="magic-input w-full px-6 py-4 text-lg"
                                placeholder="Ingresa tu contrase√±a"
                                required
                                autocomplete="current-password"
                            >
                            <button 
                                type="button" 
                                onclick="togglePassword()" 
                                class="absolute inset-y-0 right-0 pr-4 flex items-center input-icon hover-glow"
                            >
                                <svg id="eye-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Opciones adicionales mejoradas -->
                    <div class="flex items-center justify-between slide-in-up" style="animation-delay: 0.6s;">
                        <div class="flex items-center space-x-3">
                            <input 
                                id="recordar" 
                                name="recordar" 
                                type="checkbox" 
                                class="custom-checkbox"
                            >
                            <label for="recordar" class="text-white opacity-90 font-medium cursor-pointer hover:opacity-100 transition-opacity">
                                Recordar sesi√≥n
                            </label>
                        </div>
                        <button type="button" onclick="mostrarRecuperacion()" class="text-white opacity-80 hover:opacity-100 font-medium hover-glow transition-all">
                            ¬øOlvidaste tu contrase√±a?
                        </button>
                    </div>

                    <!-- Bot√≥n de login espectacular -->
                    <button 
                        type="submit" 
                        id="btn-login"
                        class="magic-button w-full py-4 px-6 text-lg slide-in-up"
                        style="animation-delay: 0.8s;"
                    >
                        <span id="btn-text">üîê Iniciar Sesi√≥n</span>
                        <div id="btn-loading" class="magic-spinner mx-auto hidden"></div>
                    </button>
                </div>
            </form>

            <!-- Intentos de acceso mejorado -->
            <div id="intentos-info" class="mt-6 text-center slide-in-up" style="animation-delay: 1.2s;">
                <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-full px-4 py-2 inline-block">
                    <span class="text-white opacity-80">Intentos restantes: </span>
                    <span id="intentos-restantes" class="font-bold text-white text-glow">3</span>
                </div>
            </div>
        </div>

        <!-- Footer con informaci√≥n de seguridad mejorado -->
        <div class="text-center mt-8 slide-in-up" style="animation-delay: 1.4s;">
            <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-2xl p-4 inline-block">
                <p class="text-white font-semibold mb-2 text-glow">üîí Conexi√≥n Segura SSL/TLS</p>
                <p class="text-white opacity-75 text-sm">¬© 2024 FG Hvac Solutions - Todos los derechos reservados</p>
            </div>
        </div>
    </div>

    <script>
        // Variables de control de seguridad
        let intentosRestantes = 3;
        let bloqueado = false;
        let tiempoBloqueo = 300; // 5 minutos en segundos

        // Credenciales v√°lidas
        const credencialesValidas = {
            'admin': { 
                password: 'admin123', 
                rol: 'Administrador', 
                nombre: 'Juan P√©rez',
                email: 'admin@fghvac.com'
            },
            'tecnico': { 
                password: 'tecnico123', 
                rol: 'T√©cnico', 
                nombre: 'Carlos Ruiz',
                email: 'tecnico@fghvac.com'
            },
            'supervisor': { 
                password: 'super123', 
                rol: 'Supervisor', 
                nombre: 'Ana Mart√≠n',
                email: 'supervisor@fghvac.com'
            }
        };

        // Variables globales para datos
        let trabajosData = [
            { id: 1, cliente: 'Mar√≠a Gonz√°lez', tipo: 'Mantenimiento', descripcion: 'Mantenimiento AC residencial', tecnico: 'Carlos Ruiz', fecha: '2024-01-15', presupuesto: 1200, estado: 'Completado' },
            { id: 2, cliente: 'Pedro L√≥pez', tipo: 'Reparaci√≥n', descripcion: 'Reparaci√≥n sistema calefacci√≥n', tecnico: 'Ana Mart√≠n', fecha: '2024-01-16', presupuesto: 800, estado: 'En Proceso' },
            { id: 3, cliente: 'Luis P√©rez', tipo: 'Instalaci√≥n', descripcion: 'Instalaci√≥n AC nuevo', tecnico: 'Carlos Ruiz', fecha: '2024-01-17', presupuesto: 2500, estado: 'Pendiente' }
        ];

        let clientesData = [
            { id: 1, nombre: 'Mar√≠a Gonz√°lez', telefono: '+34 666 123 456', email: 'maria@email.com', direccion: 'Calle Mayor 123, Madrid', ciudad: 'Madrid', codigoPostal: '28001' },
            { id: 2, nombre: 'Pedro L√≥pez', telefono: '+34 666 789 012', email: 'pedro@email.com', direccion: 'Avenida Sol 45, Barcelona', ciudad: 'Barcelona', codigoPostal: '08001' },
            { id: 3, nombre: 'Luis P√©rez', telefono: '+34 666 345 678', email: 'luis@email.com', direccion: 'Plaza Espa√±a 67, Valencia', ciudad: 'Valencia', codigoPostal: '46001' }
        ];

        // Verificar si hay una sesi√≥n guardada al cargar
        document.addEventListener('DOMContentLoaded', function() {
            verificarSesionGuardada();
        });

        function verificarSesionGuardada() {
            const sesionGuardada = localStorage.getItem('fghvac_sesion');
            if (sesionGuardada) {
                const datos = JSON.parse(sesionGuardada);
                if (datos.recordar && new Date().getTime() < datos.expiracion) {
                    mostrarNotificacion('Sesi√≥n restaurada autom√°ticamente', 'success');
                    setTimeout(() => {
                        redirigirAlSistema(datos.usuario, datos.rol, datos.nombre);
                    }, 1500);
                }
            }
        }

        function iniciarSesion(event) {
            event.preventDefault();
            
            if (bloqueado) {
                mostrarNotificacion('Sistema bloqueado. Espera antes de intentar nuevamente.', 'error');
                return;
            }

            const usuario = document.getElementById('usuario').value.trim();
            const password = document.getElementById('password').value;
            const recordar = document.getElementById('recordar').checked;

            // Mostrar estado de carga
            mostrarCargando(true);

            // Simular verificaci√≥n en servidor
            setTimeout(() => {
                if (validarCredenciales(usuario, password)) {
                    // Login exitoso
                    const datosUsuario = credencialesValidas[usuario];
                    
                    if (recordar) {
                        guardarSesion(usuario, datosUsuario.rol, datosUsuario.nombre);
                    }
                    
                    mostrarNotificacion(`¬°Bienvenido ${datosUsuario.nombre}!`, 'success');
                    
                    // Resetear intentos
                    intentosRestantes = 3;
                    actualizarIntentosUI();
                    
                    setTimeout(() => {
                        redirigirAlSistema(usuario, datosUsuario.rol, datosUsuario.nombre);
                    }, 1500);
                    
                } else {
                    // Login fallido
                    intentosRestantes--;
                    actualizarIntentosUI();
                    
                    if (intentosRestantes <= 0) {
                        activarBloqueoSeguridad();
                    } else {
                        mostrarNotificacion(`Credenciales incorrectas. Te quedan ${intentosRestantes} intentos.`, 'error');
                        document.getElementById('login-card').classList.add('shake-enhanced');
                        setTimeout(() => {
                            document.getElementById('login-card').classList.remove('shake-enhanced');
                        }, 600);
                    }
                }
                
                mostrarCargando(false);
            }, 1500);
        }

        function validarCredenciales(usuario, password) {
            return credencialesValidas[usuario] && credencialesValidas[usuario].password === password;
        }

        function guardarSesion(usuario, rol, nombre) {
            const expiracion = new Date().getTime() + (7 * 24 * 60 * 60 * 1000); // 7 d√≠as
            const datosSession = {
                usuario: usuario,
                rol: rol,
                nombre: nombre,
                recordar: true,
                expiracion: expiracion
            };
            localStorage.setItem('fghvac_sesion', JSON.stringify(datosSession));
        }

        function redirigirAlSistema(usuario, rol, nombre) {
            // Crear datos de sesi√≥n para el sistema principal
            const sessionData = {
                usuario: usuario,
                rol: rol,
                nombre: nombre,
                loginTime: new Date().toISOString()
            };
            
            // Guardar en sessionStorage para el sistema principal
            sessionStorage.setItem('fghvac_user_session', JSON.stringify(sessionData));
            
            // Mostrar el sistema moderno
            mostrarSistemaModerno(sessionData);
        }

        function mostrarSistemaModerno(sessionData) {
            document.body.innerHTML = `
                <div class="min-h-screen bg-gray-50">
                    <!-- Sidebar -->
                    <div id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-white shadow-xl border-r border-gray-200 transform transition-transform duration-300 z-40">
                        <!-- Logo -->
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex items-center space-x-3">
                                <div class="bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-xl">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h1 class="text-lg font-bold text-gray-900">FG Hvac</h1>
                                    <p class="text-xs text-gray-500">Solutions</p>
                                </div>
                            </div>
                        </div>

                        <!-- Navigation -->
                        <nav class="p-4 space-y-2">
                            <button onclick="mostrarSeccion('dashboard')" class="nav-item active w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                                </svg>
                                <span class="font-medium">Dashboard</span>
                            </button>
                            
                            <button onclick="mostrarSeccion('trabajos')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
                                </svg>
                                <span class="font-medium">Trabajos</span>
                            </button>
                            
                            <button onclick="mostrarSeccion('clientes')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                                <span class="font-medium">Clientes</span>
                            </button>
                            
                            <button onclick="mostrarSeccion('reportes')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM21 17a2 2 0 11-4 0 2 2 0 014 0zM7 17h8a2 2 0 002-2V9a2 2 0 00-2-2H7a2 2 0 00-2 2v6a2 2 0 002 2z"/>
                                </svg>
                                <span class="font-medium">Reportes</span>
                            </button>
                            
                            <button onclick="mostrarSeccion('configuracion')" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                    <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                <span class="font-medium">Configuraci√≥n</span>
                            </button>
                        </nav>

                        <!-- User Profile -->
                        <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
                                    <span class="text-white font-semibold text-sm">${sessionData.nombre.charAt(0)}</span>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900 truncate" id="user-name">${sessionData.nombre}</p>
                                    <p class="text-xs text-gray-500 truncate">${sessionData.rol}</p>
                                </div>
                                <button onclick="cerrarSesion()" class="text-gray-400 hover:text-red-500 transition-colors">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Overlay para m√≥vil -->
                    <div id="sidebar-overlay" class="sidebar-overlay lg:hidden" onclick="toggleSidebar()"></div>

                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-btn" onclick="toggleSidebar()" class="lg:hidden fixed top-4 left-4 z-50 bg-white p-2 rounded-lg shadow-lg">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                        </svg>
                    </button>

                    <!-- Main Content -->
                    <div class="lg:ml-64 min-h-screen">
                        <!-- Top Header -->
                        <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h2 id="page-title" class="text-2xl font-bold text-gray-900">Dashboard</h2>
                                    <p id="page-subtitle" class="text-sm text-gray-500 mt-1">Resumen general del sistema</p>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <button onclick="mostrarConfiguracionUsuario()" class="modern-btn bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                        </svg>
                                        <span>Mi Perfil</span>
                                    </button>
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                    </div>
                                </div>
                            </div>
                        </header>

                        <!-- Content Area -->
                        <main class="p-6">
                            <!-- Dashboard Section -->
                            <div id="dashboard-section" class="section-content active">
                                <!-- Stats Cards -->
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                                    <div class="modern-card stat-card p-6">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm font-medium text-gray-600">Trabajos Activos</p>
                                                <p class="text-3xl font-bold text-gray-900 mt-2" id="trabajos-activos">2</p>
                                                <p class="text-sm text-green-600 mt-1">+12% vs mes anterior</p>
                                            </div>
                                            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="modern-card stat-card p-6">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm font-medium text-gray-600">Clientes Totales</p>
                                                <p class="text-3xl font-bold text-gray-900 mt-2" id="clientes-totales">3</p>
                                                <p class="text-sm text-green-600 mt-1">+8% vs mes anterior</p>
                                            </div>
                                            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="modern-card stat-card p-6">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm font-medium text-gray-600">Ingresos del Mes</p>
                                                <p class="text-3xl font-bold text-gray-900 mt-2" id="ingresos-mes">4,500</p>
                                                <p class="text-sm text-green-600 mt-1">+15% vs mes anterior</p>
                                            </div>
                                            <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-yellow-600" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="modern-card stat-card p-6">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm font-medium text-gray-600">Satisfacci√≥n</p>
                                                <p class="text-3xl font-bold text-gray-900 mt-2" id="satisfaccion">96%</p>
                                                <p class="text-sm text-green-600 mt-1">+2% vs mes anterior</p>
                                            </div>
                                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Charts and Data -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                                    <!-- Gr√°fico de Tipos de Trabajo -->
                                    <div class="modern-card p-6">
                                        <h3 class="text-xl font-bold text-gray-900 mb-6">Tipos de Trabajo</h3>
                                        <div class="flex items-center justify-center">
                                            <div class="relative w-72 h-72">
                                                <svg class="w-72 h-72 transform -rotate-90" viewBox="0 0 100 100">
                                                    <!-- C√≠rculo base -->
                                                    <circle cx="50" cy="50" r="35" fill="none" stroke="#f3f4f6" stroke-width="10"/>
                                                    
                                                    <!-- Mantenimiento - 35% (azul) -->
                                                    <circle cx="50" cy="50" r="35" fill="none" stroke="#3b82f6" stroke-width="10" 
                                                        stroke-dasharray="77 220" stroke-dashoffset="0" opacity="0.9"/>
                                                    
                                                    <!-- Reparaciones - 30% (rojo) -->
                                                    <circle cx="50" cy="50" r="35" fill="none" stroke="#ef4444" stroke-width="10" 
                                                        stroke-dasharray="66 220" stroke-dashoffset="-77" opacity="0.9"/>
                                                    
                                                    <!-- Instalaciones - 25% (verde) -->
                                                    <circle cx="50" cy="50" r="35" fill="none" stroke="#10b981" stroke-width="10" 
                                                        stroke-dasharray="55 220" stroke-dashoffset="-143" opacity="0.9"/>
                                                    
                                                    <!-- Diagn√≥stico - 10% (amarillo) -->
                                                    <circle cx="50" cy="50" r="35" fill="none" stroke="#f59e0b" stroke-width="10" 
                                                        stroke-dasharray="22 220" stroke-dashoffset="-198" opacity="0.9"/>
                                                </svg>
                                                
                                                <!-- Centro del gr√°fico -->
                                                <div class="absolute inset-0 flex items-center justify-center">
                                                    <div class="text-center">
                                                        <div class="text-3xl font-bold text-gray-900" id="total-trabajos-tipo">3</div>
                                                        <div class="text-sm text-gray-500">Total</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Leyenda -->
                                        <div class="chart-legend justify-center">
                                            <div class="legend-item">
                                                <div class="legend-color bg-blue-500"></div>
                                                <span>Mantenimiento (1)</span>
                                            </div>
                                            <div class="legend-item">
                                                <div class="legend-color bg-red-500"></div>
                                                <span>Reparaciones (1)</span>
                                            </div>
                                            <div class="legend-item">
                                                <div class="legend-color bg-green-500"></div>
                                                <span>Instalaciones (1)</span>
                                            </div>
                                            <div class="legend-item">
                                                <div class="legend-color bg-yellow-500"></div>
                                                <span>Diagn√≥stico (0)</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Clientes Recientes -->
                                    <div class="modern-card p-6">
                                        <h3 class="text-xl font-bold text-gray-900 mb-6">Clientes Recientes</h3>
                                        <div class="space-y-4" id="clientes-recientes">
                                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                                    <div>
                                                        <p class="font-medium text-gray-900">Mar√≠a Gonz√°lez</p>
                                                        <p class="text-sm text-gray-500">Mantenimiento AC</p>
                                                    </div>
                                                </div>
                                                <span class="text-green-600 font-semibold text-sm">Completado</span>
                                            </div>
                                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                                    <div>
                                                        <p class="font-medium text-gray-900">Pedro L√≥pez</p>
                                                        <p class="text-sm text-gray-500">Reparaci√≥n Calefacci√≥n</p>
                                                    </div>
                                                </div>
                                                <span class="text-blue-600 font-semibold text-sm">En Proceso</span>
                                            </div>
                                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                                    <div>
                                                        <p class="font-medium text-gray-900">Luis P√©rez</p>
                                                        <p class="text-sm text-gray-500">Instalaci√≥n Nueva</p>
                                                    </div>
                                                </div>
                                                <span class="text-yellow-600 font-semibold text-sm">Pendiente</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actividad Reciente -->
                                <div class="modern-card p-6 mb-8">
                                    <h3 class="text-xl font-bold text-gray-900 mb-6">Actividad Reciente</h3>
                                    <div class="space-y-3" id="actividad-reciente">
                                        <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span class="text-gray-600 text-sm">Sistema iniciado correctamente</span>
                                            <span class="text-gray-400 text-xs ml-auto">Ahora</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Acciones R√°pidas -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="modern-card p-6 bg-gradient-to-br from-green-50 to-green-100 border-green-200">
                                        <div class="flex items-center space-x-4">
                                            <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1">
                                                <h3 class="text-lg font-semibold text-gray-900">Nuevo Trabajo</h3>
                                                <p class="text-sm text-gray-600">Crear trabajo para cliente</p>
                                            </div>
                                        </div>
                                        <button onclick="crearNuevoTrabajo()" class="modern-btn w-full mt-4 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg">
                                            Crear Trabajo
                                        </button>
                                    </div>
                                    
                                    <div class="modern-card p-6 bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200">
                                        <div class="flex items-center space-x-4">
                                            <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1">
                                                <h3 class="text-lg font-semibold text-gray-900">Nuevo Cliente</h3>
                                                <p class="text-sm text-gray-600">Registrar cliente</p>
                                            </div>
                                        </div>
                                        <button onclick="registrarNuevoCliente()" class="modern-btn w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">
                                            Registrar Cliente
                                        </button>
                                    </div>

                                    <div class="modern-card p-6 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200">
                                        <div class="flex items-center space-x-4">
                                            <div class="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM21 17a2 2 0 11-4 0 2 2 0 014 0zM7 17h8a2 2 0 002-2V9a2 2 0 00-2-2H7a2 2 0 00-2 2v6a2 2 0 002 2z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1">
                                                <h3 class="text-lg font-semibold text-gray-900">Reportes</h3>
                                                <p class="text-sm text-gray-600">Generar reportes</p>
                                            </div>
                                        </div>
                                        <button onclick="generarReportes()" class="modern-btn w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg">
                                            Ver Reportes
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Secci√≥n de Trabajos -->
                            <div id="trabajos-section" class="section-content">
                                <div class="flex justify-between items-center mb-6">
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900">Gesti√≥n de Trabajos</h3>
                                        <p class="text-gray-600">Administra todos los trabajos y servicios</p>
                                    </div>
                                    <button onclick="abrirModalTrabajo()" class="modern-btn bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center space-x-2">
                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                        </svg>
                                        <span>Nuevo Trabajo</span>
                                    </button>
                                </div>

                                <div class="modern-card overflow-hidden">
                                    <div class="overflow-x-auto">
                                        <table class="modern-table w-full">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Cliente</th>
                                                    <th>Tipo</th>
                                                    <th>Descripci√≥n</th>
                                                    <th>T√©cnico</th>
                                                    <th>Fecha</th>
                                                    <th>Presupuesto</th>
                                                    <th>Estado</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabla-trabajos">
                                                <!-- Los trabajos se cargan din√°micamente -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Secci√≥n de Clientes -->
                            <div id="clientes-section" class="section-content">
                                <div class="flex justify-between items-center mb-6">
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900">Gesti√≥n de Clientes</h3>
                                        <p class="text-gray-600">Administra la base de datos de clientes</p>
                                    </div>
                                    <button onclick="abrirModalCliente()" class="modern-btn bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center space-x-2">
                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                        </svg>
                                        <span>Nuevo Cliente</span>
                                    </button>
                                </div>

                                <div class="modern-card overflow-hidden">
                                    <div class="overflow-x-auto">
                                        <table class="modern-table w-full">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Nombre</th>
                                                    <th>Tel√©fono</th>
                                                    <th>Email</th>
                                                    <th>Direcci√≥n</th>
                                                    <th>Ciudad</th>
                                                    <th>C√≥digo Postal</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabla-clientes">
                                                <!-- Los clientes se cargan din√°micamente -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div id="reportes-section" class="section-content">
                                <div class="modern-card p-6">
                                    <h3 class="text-2xl font-bold text-gray-900 mb-6">Reportes y An√°lisis</h3>
                                    <p class="text-gray-600">Aqu√≠ puedes generar y ver reportes detallados.</p>
                                </div>
                            </div>

                            <div id="configuracion-section" class="section-content">
                                <div class="modern-card p-6">
                                    <h3 class="text-2xl font-bold text-gray-900 mb-6">Configuraci√≥n del Sistema</h3>
                                    <p class="text-gray-600">Aqu√≠ puedes configurar el sistema y tu perfil.</p>
                                </div>
                            </div>
                        </main>
                    </div>

                    <!-- Modal de Configuraci√≥n de Usuario -->
                    <div id="modal-usuario" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                        <div class="bg-white rounded-2xl p-8 max-w-md mx-4 w-full">
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-2">Mi Perfil</h3>
                                <p class="text-gray-600">Actualiza tu informaci√≥n personal</p>
                            </div>

                            <div class="space-y-6">
                                <!-- Cambiar Nombre -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nombre Completo</label>
                                    <input type="text" id="nuevo-nombre" value="${sessionData.nombre}" class="modern-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                </div>

                                <!-- Cambiar Contrase√±a -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nueva Contrase√±a</label>
                                    <input type="password" id="nueva-password" placeholder="Dejar vac√≠o para no cambiar" class="modern-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Confirmar Contrase√±a</label>
                                    <input type="password" id="confirmar-password" placeholder="Confirmar nueva contrase√±a" class="modern-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>

                            <div class="flex space-x-4 mt-8">
                                <button onclick="cerrarModalUsuario()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 px-4 rounded-lg transition-colors">
                                    Cancelar
                                </button>
                                <button onclick="guardarCambiosUsuario()" class="flex-1 modern-btn bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg">
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Modal de Nuevo Trabajo -->
                    <div id="modal-trabajo" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                        <div class="bg-white rounded-2xl p-8 max-w-2xl mx-4 w-full max-h-screen overflow-y-auto">
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-2">Nuevo Trabajo</h3>
                                <p class="text-gray-600">Crear un nuevo trabajo o servicio</p>
                            </div>

                            <form id="form-trabajo" onsubmit="guardarTrabajo(event)" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Cliente *</label>
                                        <select id="trabajo-cliente" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                            <option value="">Seleccionar cliente</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Trabajo *</label>
                                        <select id="trabajo-tipo" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                            <option value="">Seleccionar tipo</option>
                                            <option value="Mantenimiento">Mantenimiento</option>
                                            <option value="Reparaci√≥n">Reparaci√≥n</option>
                                            <option value="Instalaci√≥n">Instalaci√≥n</option>
                                            <option value="Diagn√≥stico">Diagn√≥stico</option>
                                        </select>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Descripci√≥n *</label>
                                    <textarea id="trabajo-descripcion" required rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="Describe el trabajo a realizar..."></textarea>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">T√©cnico Asignado *</label>
                                        <select id="trabajo-tecnico" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                            <option value="">Seleccionar t√©cnico</option>
                                            <option value="Carlos Ruiz">Carlos Ruiz</option>
                                            <option value="Ana Mart√≠n">Ana Mart√≠n</option>
                                            <option value="Luis Garc√≠a">Luis Garc√≠a</option>
                                            <option value="Mar√≠a L√≥pez">Mar√≠a L√≥pez</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Fecha Programada *</label>
                                        <input type="date" id="trabajo-fecha" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Presupuesto ($) *</label>
                                        <input type="number" id="trabajo-presupuesto" required min="0" step="0.01" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="0.00">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Estado</label>
                                        <select id="trabajo-estado" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                            <option value="Pendiente">Pendiente</option>
                                            <option value="En Proceso">En Proceso</option>
                                            <option value="Completado">Completado</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="flex space-x-4 mt-8">
                                    <button type="button" onclick="cerrarModalTrabajo()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 px-4 rounded-lg transition-colors">
                                        Cancelar
                                    </button>
                                    <button type="submit" class="flex-1 modern-btn bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg">
                                        Crear Trabajo
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Modal de Nuevo Cliente -->
                    <div id="modal-cliente" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                        <div class="bg-white rounded-2xl p-8 max-w-2xl mx-4 w-full max-h-screen overflow-y-auto">
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-2">Nuevo Cliente</h3>
                                <p class="text-gray-600">Registrar un nuevo cliente</p>
                            </div>

                            <form id="form-cliente" onsubmit="guardarCliente(event)" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Nombre Completo *</label>
                                        <input type="text" id="cliente-nombre" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="Nombre y apellidos">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Tel√©fono *</label>
                                        <input type="tel" id="cliente-telefono" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="+34 666 123 456">
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                                    <input type="email" id="cliente-email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="cliente@email.com">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Direcci√≥n *</label>
                                    <input type="text" id="cliente-direccion" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="Calle, n√∫mero, piso...">
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Ciudad *</label>
                                        <input type="text" id="cliente-ciudad" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="Madrid">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">C√≥digo Postal *</label>
                                        <input type="text" id="cliente-codigo" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="28001">
                                    </div>
                                </div>

                                <div class="flex space-x-4 mt-8">
                                    <button type="button" onclick="cerrarModalCliente()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 px-4 rounded-lg transition-colors">
                                        Cancelar
                                    </button>
                                    <button type="submit" class="flex-1 modern-btn bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg">
                                        Registrar Cliente
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            `;
            
            // Guardar datos de sesi√≥n globalmente
            window.sessionActual = sessionData;
            
            // Inicializar contadores
            actualizarContadores();
        }

        // Funciones del sistema moderno
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        function mostrarSeccion(seccion) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section-content').forEach(el => {
                el.classList.remove('active');
            });
            
            // Mostrar la secci√≥n seleccionada
            document.getElementById(seccion + '-section').classList.add('active');
            
            // Actualizar navegaci√≥n
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Actualizar t√≠tulo
            const titulos = {
                dashboard: { titulo: 'Dashboard', subtitulo: 'Resumen general del sistema' },
                trabajos: { titulo: 'Trabajos', subtitulo: 'Gesti√≥n de trabajos y servicios' },
                clientes: { titulo: 'Clientes', subtitulo: 'Gesti√≥n de clientes' },
                reportes: { titulo: 'Reportes', subtitulo: 'An√°lisis y reportes detallados' },
                configuracion: { titulo: 'Configuraci√≥n', subtitulo: 'Configuraci√≥n del sistema' }
            };
            
            document.getElementById('page-title').textContent = titulos[seccion].titulo;
            document.getElementById('page-subtitle').textContent = titulos[seccion].subtitulo;
            
            // Cargar contenido espec√≠fico de la secci√≥n
            if (seccion === 'trabajos') {
                cargarSeccionTrabajos();
            } else if (seccion === 'clientes') {
                cargarSeccionClientes();
            }
            
            // Cerrar sidebar en m√≥vil
            if (window.innerWidth < 1024) {
                toggleSidebar();
            }
        }

        // Funciones para cargar secciones
        function cargarSeccionTrabajos() {
            const tbody = document.getElementById('tabla-trabajos');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            trabajosData.forEach(trabajo => {
                const estadoColor = {
                    'Pendiente': 'bg-yellow-100 text-yellow-800',
                    'En Proceso': 'bg-blue-100 text-blue-800',
                    'Completado': 'bg-green-100 text-green-800'
                };
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="font-medium">#${trabajo.id}</td>
                    <td>${trabajo.cliente}</td>
                    <td>${trabajo.tipo}</td>
                    <td class="max-w-xs truncate">${trabajo.descripcion}</td>
                    <td>${trabajo.tecnico}</td>
                    <td>${trabajo.fecha}</td>
                    <td>${trabajo.presupuesto}</td>
                    <td><span class="px-2 py-1 rounded-full text-xs font-medium ${estadoColor[trabajo.estado]}">${trabajo.estado}</span></td>
                    <td>
                        <button onclick="editarTrabajo(${trabajo.id})" class="text-blue-600 hover:text-blue-800 mr-2">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                            </svg>
                        </button>
                        <button onclick="eliminarTrabajo(${trabajo.id})" class="text-red-600 hover:text-red-800">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                            </svg>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function cargarSeccionClientes() {
            const tbody = document.getElementById('tabla-clientes');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            clientesData.forEach(cliente => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="font-medium">#${cliente.id}</td>
                    <td>${cliente.nombre}</td>
                    <td>${cliente.telefono}</td>
                    <td>${cliente.email}</td>
                    <td class="max-w-xs truncate">${cliente.direccion}</td>
                    <td>${cliente.ciudad}</td>
                    <td>${cliente.codigoPostal}</td>
                    <td>
                        <button onclick="editarCliente(${cliente.id})" class="text-blue-600 hover:text-blue-800 mr-2">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                            </svg>
                        </button>
                        <button onclick="eliminarCliente(${cliente.id})" class="text-red-600 hover:text-red-800">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                            </svg>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Funciones de modales
        function abrirModalTrabajo() {
            // Cargar clientes en el selector
            const selectCliente = document.getElementById('trabajo-cliente');
            selectCliente.innerHTML = '<option value="">Seleccionar cliente</option>';
            clientesData.forEach(cliente => {
                const option = document.createElement('option');
                option.value = cliente.nombre;
                option.textContent = cliente.nombre;
                selectCliente.appendChild(option);
            });
            
            // Establecer fecha por defecto
            document.getElementById('trabajo-fecha').value = new Date().toISOString().split('T')[0];
            
            document.getElementById('modal-trabajo').classList.remove('hidden');
            document.getElementById('modal-trabajo').classList.add('flex');
        }

        function cerrarModalTrabajo() {
            document.getElementById('modal-trabajo').classList.add('hidden');
            document.getElementById('modal-trabajo').classList.remove('flex');
            document.getElementById('form-trabajo').reset();
        }

        function abrirModalCliente() {
            document.getElementById('modal-cliente').classList.remove('hidden');
            document.getElementById('modal-cliente').classList.add('flex');
        }

        function cerrarModalCliente() {
            document.getElementById('modal-cliente').classList.add('hidden');
            document.getElementById('modal-cliente').classList.remove('flex');
            document.getElementById('form-cliente').reset();
        }

        // Funciones para guardar datos
        function guardarTrabajo(event) {
            event.preventDefault();
            
            const nuevoTrabajo = {
                id: trabajosData.length + 1,
                cliente: document.getElementById('trabajo-cliente').value,
                tipo: document.getElementById('trabajo-tipo').value,
                descripcion: document.getElementById('trabajo-descripcion').value,
                tecnico: document.getElementById('trabajo-tecnico').value,
                fecha: document.getElementById('trabajo-fecha').value,
                presupuesto: parseFloat(document.getElementById('trabajo-presupuesto').value),
                estado: document.getElementById('trabajo-estado').value
            };
            
            trabajosData.push(nuevoTrabajo);
            
            // Actualizar contadores
            actualizarContadores();
            
            // Recargar tabla si estamos en la secci√≥n de trabajos
            if (document.getElementById('trabajos-section').classList.contains('active')) {
                cargarSeccionTrabajos();
            }
            
            mostrarNotificacionModerna('Trabajo creado exitosamente', 'success');
            actualizarActividad(`Nuevo trabajo creado para ${nuevoTrabajo.cliente}`);
            cerrarModalTrabajo();
        }

        function guardarCliente(event) {
            event.preventDefault();
            
            const nuevoCliente = {
                id: clientesData.length + 1,
                nombre: document.getElementById('cliente-nombre').value,
                telefono: document.getElementById('cliente-telefono').value,
                email: document.getElementById('cliente-email').value,
                direccion: document.getElementById('cliente-direccion').value,
                ciudad: document.getElementById('cliente-ciudad').value,
                codigoPostal: document.getElementById('cliente-codigo').value
            };
            
            clientesData.push(nuevoCliente);
            
            // Actualizar contadores
            actualizarContadores();
            
            // Recargar tabla si estamos en la secci√≥n de clientes
            if (document.getElementById('clientes-section').classList.contains('active')) {
                cargarSeccionClientes();
            }
            
            mostrarNotificacionModerna('Cliente registrado exitosamente', 'success');
            actualizarActividad(`Nuevo cliente registrado: ${nuevoCliente.nombre}`);
            cerrarModalCliente();
        }

        // Funciones de edici√≥n y eliminaci√≥n
        function editarTrabajo(id) {
            mostrarNotificacionModerna('Funci√≥n de edici√≥n disponible pr√≥ximamente', 'info');
        }

        function eliminarTrabajo(id) {
            if (confirm('¬øEst√°s seguro de que quieres eliminar este trabajo?')) {
                trabajosData = trabajosData.filter(t => t.id !== id);
                cargarSeccionTrabajos();
                actualizarContadores();
                mostrarNotificacionModerna('Trabajo eliminado', 'success');
                actualizarActividad('Trabajo eliminado del sistema');
            }
        }

        function editarCliente(id) {
            mostrarNotificacionModerna('Funci√≥n de edici√≥n disponible pr√≥ximamente', 'info');
        }

        function eliminarCliente(id) {
            if (confirm('¬øEst√°s seguro de que quieres eliminar este cliente?')) {
                clientesData = clientesData.filter(c => c.id !== id);
                cargarSeccionClientes();
                actualizarContadores();
                mostrarNotificacionModerna('Cliente eliminado', 'success');
                actualizarActividad('Cliente eliminado del sistema');
            }
        }

        function crearNuevoTrabajo() {
            abrirModalTrabajo();
        }

        function registrarNuevoCliente() {
            abrirModalCliente();
        }

        function actualizarContadores() {
            // Actualizar trabajos activos (no completados)
            const trabajosActivos = trabajosData.filter(t => t.estado !== 'Completado').length;
            const trabajosElement = document.getElementById('trabajos-activos');
            if (trabajosElement) {
                trabajosElement.textContent = trabajosActivos;
            }
            
            // Actualizar clientes totales
            const clientesElement = document.getElementById('clientes-totales');
            if (clientesElement) {
                clientesElement.textContent = clientesData.length;
            }
            
            // Actualizar total de trabajos en gr√°fico
            const totalTrabajosElement = document.getElementById('total-trabajos-tipo');
            if (totalTrabajosElement) {
                totalTrabajosElement.textContent = trabajosData.length;
            }
            
            // Actualizar ingresos (suma de presupuestos)
            const ingresosTotales = trabajosData.reduce((sum, trabajo) => sum + trabajo.presupuesto, 0);
            const ingresosElement = document.getElementById('ingresos-mes');
            if (ingresosElement) {
                ingresosElement.textContent = `${ingresosTotales.toLocaleString()}`;
            }
        }

        function mostrarConfiguracionUsuario() {
            document.getElementById('modal-usuario').classList.remove('hidden');
            document.getElementById('modal-usuario').classList.add('flex');
        }

        function cerrarModalUsuario() {
            document.getElementById('modal-usuario').classList.add('hidden');
            document.getElementById('modal-usuario').classList.remove('flex');
        }

        function guardarCambiosUsuario() {
            const nuevoNombre = document.getElementById('nuevo-nombre').value.trim();
            const nuevaPassword = document.getElementById('nueva-password').value;
            const confirmarPassword = document.getElementById('confirmar-password').value;
            
            if (!nuevoNombre) {
                mostrarNotificacionModerna('Por favor ingresa un nombre v√°lido', 'error');
                return;
            }
            
            if (nuevaPassword && nuevaPassword !== confirmarPassword) {
                mostrarNotificacionModerna('Las contrase√±as no coinciden', 'error');
                return;
            }
            
            // Actualizar nombre en la interfaz
            document.getElementById('user-name').textContent = nuevoNombre;
            window.sessionActual.nombre = nuevoNombre;
            
            // Actualizar credenciales si se cambi√≥ la contrase√±a
            if (nuevaPassword) {
                credencialesValidas[window.sessionActual.usuario].password = nuevaPassword;
            }
            
            // Actualizar nombre en credenciales
            credencialesValidas[window.sessionActual.usuario].nombre = nuevoNombre;
            
            mostrarNotificacionModerna('Perfil actualizado correctamente', 'success');
            cerrarModalUsuario();
            
            // Limpiar campos
            document.getElementById('nueva-password').value = '';
            document.getElementById('confirmar-password').value = '';
        }

        function generarReportes() {
            mostrarNotificacionModerna('Generando reportes detallados...', 'info');
            
            setTimeout(() => {
                mostrarNotificacionModerna('Reportes generados y listos para descargar', 'success');
                actualizarActividad('Reportes mensuales generados');
            }, 2000);
        }

        function actualizarActividad(mensaje) {
            const actividadContainer = document.getElementById('actividad-reciente');
            if (!actividadContainer) return;
            
            const nuevaActividad = document.createElement('div');
            nuevaActividad.className = 'flex items-center space-x-3 p-3 bg-gray-50 rounded-lg fade-in';
            nuevaActividad.innerHTML = `
                <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                <span class="text-gray-600 text-sm">${mensaje}</span>
                <span class="text-gray-400 text-xs ml-auto">Ahora</span>
            `;
            
            // Insertar al principio
            actividadContainer.insertBefore(nuevaActividad, actividadContainer.firstChild);
            
            // Mantener solo las √∫ltimas 4 actividades
            const actividades = actividadContainer.children;
            if (actividades.length > 4) {
                actividadContainer.removeChild(actividades[actividades.length - 1]);
            }
        }

        function mostrarNotificacionModerna(mensaje, tipo = 'info') {
            const colores = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };
            
            const iconos = {
                success: '‚úì',
                error: '‚úï',
                info: '‚Ñπ',
                warning: '‚ö†'
            };
            
            const notificacion = document.createElement('div');
            notificacion.className = `notification ${colores[tipo]} text-white flex items-center space-x-3`;
            notificacion.innerHTML = `
                <div class="w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                    <span class="text-sm font-bold">${iconos[tipo]}</span>
                </div>
                <span>${mensaje}</span>
            `;
            
            document.body.appendChild(notificacion);
            
            setTimeout(() => {
                notificacion.style.animation = 'slideInRight 0.3s ease reverse';
                setTimeout(() => notificacion.remove(), 300);
            }, 4000);
        }

        function cerrarSesion() {
            localStorage.removeItem('fghvac_sesion');
            sessionStorage.removeItem('fghvac_user_session');
            location.reload();
        }

        // Funciones auxiliares del login
        function activarBloqueoSeguridad() {
            bloqueado = true;
            mostrarNotificacion('Sistema bloqueado por seguridad', 'error');
        }

        function mostrarCargando(mostrar) {
            const btnText = document.getElementById('btn-text');
            const btnLoading = document.getElementById('btn-loading');
            const btnLogin = document.getElementById('btn-login');
            
            if (mostrar) {
                btnText.classList.add('hidden');
                btnLoading.classList.remove('hidden');
                btnLogin.disabled = true;
                btnLogin.classList.add('opacity-75', 'cursor-not-allowed');
            } else {
                btnText.classList.remove('hidden');
                btnLoading.classList.add('hidden');
                btnLogin.disabled = false;
                btnLogin.classList.remove('opacity-75', 'cursor-not-allowed');
            }
        }

        function actualizarIntentosUI() {
            document.getElementById('intentos-restantes').textContent = intentosRestantes;
        }

        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eye-icon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.innerHTML = '<path d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L8.464 8.464M9.878 9.878a3 3 0 00-.007 4.243m5.878-5.878L17.25 6.75M14.121 14.121L15.536 15.536M14.121 14.121a3 3 0 01-4.243 0M3.53 3.53l16.94 16.94"/>';
            } else {
                passwordInput.type = 'password';
                eyeIcon.innerHTML = '<path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>';
            }
        }

        function mostrarRecuperacion() {
            mostrarNotificacion('Funci√≥n de recuperaci√≥n disponible pr√≥ximamente', 'info');
        }

        function mostrarNotificacion(mensaje, tipo = 'info') {
            const colores = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };
            
            const notificacion = document.createElement('div');
            notificacion.className = `fixed top-4 right-4 ${colores[tipo]} text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in`;
            notificacion.textContent = mensaje;
            
            document.body.appendChild(notificacion);
            
            setTimeout(() => {
                notificacion.remove();
            }, 4000);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98a6e5dc91ee571f',t:'MTc1OTc3MTk0NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

